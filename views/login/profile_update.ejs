<!DOCTYPE html>
<head>
    <link href="https://cdn.discordapp.com/attachments/751431280519807068/800629207469785128/5g.png" rel="shortcut icon" type="images/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
        integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
        integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <style>
        @font-face {
        font-family: 'NanumBarunGothic';
        font-style: normal;
        font-weight: 700;
        src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.eot');
        src: url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.eot?#iefix') format('embedded-opentype'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.woff') format('woff'), url('//cdn.jsdelivr.net/font-nanumlight/1.0/NanumBarunGothicWebBold.ttf') format('truetype')
        }
        body{
            font-family: 'NanumBarunGothic';
        }
        .form-profile input[type=text], input[type=email], input[type=tel]{
            width: 70%;
        }
        .table tr td{
            width: 70px;
        }
        .con{
            position: fixed;
            width: 600px;
            top: 10px;
            left: 50px;
        }
    </style>
</head>
<body>
    <div class="con">
        <div class="row pt-5">
            <div class="col">
                <div class="border border-2 p-3">
                    <div class="fs-4 text-center pb-2">정보 수정</div>
                    <form method="POST" name="form" class="form-profile" enctype="multipart/form-data" onsubmit="return update();">
                        <table class="table table-strip text-center">
                            <tr>
                                <td class="w-25">이름</td>
                                <td><input type="text" name="profile_name" id="profile_name" placeholder="이름" value="<%= result[0].u_name %>"></td>
                            </tr>
                            <tr>
                                <td>전화번호</td>
                                <td><input type="tel" name="profile_phone" id="profile_phone" placeholder="전화번호" value="<%= result[0].u_phone %>"></td>
                            </tr>
                            <tr>
                                <td>이메일</td>
                                <td><input type="email" name="profile_email" id="profile_email" placeholder="이메일" value="<%= result[0].u_email %>"></td>
                            </tr>
                            <tr>
                                <td>이미지</td>
                                <td>
                                    <div>
                                        <img class="img-thumbnail" style="width: 240px; height: 240px;" id="preview-image"><br><br>
                                        <div class="input-group">
                                            <input class="form-control" type="file" name="attachment" id="attachimg" accept="image/*" required>
                                        </div>
                                    </div>
                                </td>

                                <input type="hidden" name="namex" value="<%= result[0].u_name%>"/>
                                <input type="hidden" name="idx" value="<%= result[0].u_id%>"/>
                                <input type="hidden" name="phonex" value="<%= result[0].u_phone%>"/>
                                <input type="hidden" name="emailx" value="<%= result[0].u_email%>"/>
                            </tr>
                        </table>

                        <div align="right">
                            <input type ="submit" class="btn btn-secondary" value="수정 완료" onclick="form.action='/profile_update'"/>
                            <input type ="button" class="btn btn-secondary" value="돌아가기" onclick="history.back()"/>
                        </div>
                        </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
    
<script type="text/javascript">
    function readImage(input) {
    if(input.files && input.files[0]) {
        const reader = new FileReader()
        reader.onload = e => {
            const previewImage = document.getElementById("preview-image")
            previewImage.src = e.target.result
        }
        reader.readAsDataURL(input.files[0])
    }
}
    const inputImage = document.getElementById("attachimg")
    inputImage.addEventListener("change", e => {
        readImage(e.target)
    })
</script>
