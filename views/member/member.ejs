<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
      <title>ITRC member</title>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <style>
      @import url(/stylesheets/member.css);
   </style>
</head>

<body>
  <header>
    <% include ../include/header %>
</header>
  <section>
    <div>
      <img src="/images/555.jpg" alt="0" class="memberimg">
    </div>
  </section> 
     
  <div class="title" align="center">
    <p>Introduce ITRC member</p>
  </div>
  <hr>
   <div align="center">
    <table class="membertable" align="center">
      <% for(let i= 0; i< result.length; i++){ %>
          <tr>
            <td>
              <img src="/images/member/noimg.jpg" width="150" height="150">
            </td>
            <th>
              <ul>
                <h3 align="left"><%=result[i].m_name%></h3>
                <li><p><%=result[i].m_division%></p></li>
                <li><p><%=result[i].m_univ%></p></li>
                <li><p>소속 : <%=result[i].m_group%></p></li>
                <li><p>직위 : <%=result[i].m_position%></p></li>
              </ul>
              <div align="center">
                <button type="button" id="membtn" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uitmodal"
                data-name="<%=result[i].m_name%>" data-photo="<%=result[i].m_photo%>" data-group="<%=result[i].m_group%>"
                data-division="<%=result[i].m_division%>" data-univ="<%=result[i].m_univ%>" data-partdivision="<%=result[i].m_partdivision%>"
                data-position="<%=result[i].m_position%>" data-finalyear="<%=result[i].m_finalyear%>" data-finalmajor="<%=result[i].m_finalmajor%>"
                data-partperiod="<%=result[i].m_participationPeriod%>" data-partrate="<%=result[i].m_participationRate%>">더 보기</button>
              </div>
            </th>
          </tr>
        <% } %>
    </table>
   </div>
 
  
  <div class="modal fade" id="uitmodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title"></h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" align="center">
          <table id="imtable">
            <tr>
              <th rowspan="4">
                <img src="/images/member/noimg.jpg" alt="없음" id="imgmodal">
              </th>
            </tr>
            <tr>
              <th id="univmodal"></th>
            </tr>
            <tr>
              <th id="groupmodal"></th>
            </tr>
            <tr>
              <th id="positionmodal"></th>
            </tr>
          </table>
          <br>
          <table id="careertable">
            <tr>
              <td>최종학위 년도</td>
              <th id="yearmodal"></th>
            <tr>
              <td>최종학위 전공</td>
              <th id="majormodal"></th>
            </tr>
            <tr>
              <td>참여기간</td>
              <th id="periodmodal"></th>
            </tr>
            <tr>
              <td>참여율</td>
              <th id="ratemodal"></th>
            </tr>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <% include ../include/footer %>
</footer>

</body>

<script>
 $('#uitmodal').on('show.bs.modal', function (event){
    var button = $(event.relatedTarget);
    var photo = button.data('photo');
    var univ = button.data('univ');
    var name = button.data('name');
    var group = button.data('group');
    var division = button.data('division');
    var partdivision = button.data('partdivision');

    var position = button.data('position');
    var finalyear = button.data('finalyear');
    var finalmajor = button.data('finalmajor');
    var partperiod = button.data('partperiod');
    var partrate = button.data('partrate');

    var modal=$(this)
    modal.find('.modal-title').text(division+" "+partdivision+" "+name);
    modal.find('.modal-body #imtable #univmodal').text(univ);
    modal.find('.modal-body #imtable #groupmodal').text(group);
    modal.find('.modal-body #imtable #positionmodal').text(position);

    modal.find('.modal-body #careertable #yearmodal').text(finalyear+"년");
    modal.find('.modal-body #careertable #majormodal').text(finalmajor);
    modal.find('.modal-body #careertable #periodmodal').text(partperiod+"년");
    modal.find('.modal-body #careertable #ratemodal').text(partrate+"%");
    document.getElementById('imgmodal').src = ("/images/member/"+photo);
  });
</script>